<?xml version="1.0" encoding="UTF-8"?>
<page:page xmlns:page="http://tjansen.de/minifiedPage" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://tjansen.de/minifiedPage ../schemas/page.xsd ">
  <page:title>Embedding &amp; Compiling Minified.js</page:title>
  <page:section>docs</page:section>
  <page:externalCss>../css/doc.css</page:externalCss>
  <page:main><![CDATA[<div>
  <h1>Embedding &amp; Compiling Minified.js</h1>

<h2>Why Should I Embed Minified.js?</h2>
<p>
The easiest way to use Minfied is the traditional way, just add a script tag on your page and point it to one of the precompiled versions that
you can <a href="/download">download</a>:
<pre>&lt;script type="text/javascript" src="path/to/minified.js">&lt;/script>
</pre>
This is not only the simplest way to use Minified, it's also by far the quickest way to get started. 
</p>

<p>However, if your goal is to optimize your site for download size or page load time, it's often better to combine all your source 
file into a single file. 
Using a single file has several advantages:
<ul>
<li>The browser only needs a single HTTP requests, reducing load time.</li>
<li>If you compile your source code using a compiler/minification tool such as Google Closure, UglifyJS or YUI Compressors, they will work better 
with a single file.</li>
<li>Gzip compression is also more efficient when you have a single large JavaScript file, as opposed to several small ones.</li>
</ul>
</p>

<h2>How can I Embed Minified.js?</h2>
<p>Embedding Minified can be as easy as taking the content of a Minified source file and copying it at the top of your source code. 
Usually this is not really practical though. Unless only have a few lines of code and can live with scrolling down to edit your own code,
you need to set up a small build system that combines several source files into a single result file. On the command line, a
<code>cat</code> command should be sufficient for that. When you use a compiler like Google Closure or UglifyJS, they are usually 
already capable of combining files. Personally, I prefer to use <a href="http://ant.apache.org">Ant</a> as build system. Combining
several source files using Ant and Google Closure is as easy as this:
<pre>
&lt;java jar="thirdPartyLibs/closure-compiler/compiler.jar" failonerror="true" fork="true">
 	&lt;arg value="--compilation_level=SIMPLE_OPTIMIZATIONS" />
	&lt;arg value="--js=minified-src.js"/>         &lt!-- First input file -->
	&lt;arg value="--js=yourfile1.js"/>            &lt!-- Second input file -->
	&lt;arg value="--js=yourfile2.js"/>            &lt!-- 3rd input file -->
	&lt;arg value="--js=yourfile3.js"/>            &lt!-- 4th input file -->
  	&lt;arg value="--js_output_file=output.js"/>   &lt!-- Output file -->
&lt;/java>
</pre>
Ant is perfect for using tools written in Java, such as Closure and YUI compressor, but makes it a bit difficult to use other tools.
If you prefer UglifyJS, <a href="http://gruntjs.com/">grunt</a> may be a better choice.
</p>

<h2>How can I Compile Minified.js with Closure?</h2>
<p>Most compilers / minification tools will work just fine with Minified.js, but there is one exception: 
the Google Closure Compiler with Advanced Optimization. While Closure's Simple Optimization does not cause any problem,  
the Advanced Optimization options require a lot of annotations to work correctly for a library. The compilation process removes 
the annotations and thus, if you want to embed Minified and use Advanced Optimizations, you must use the plain source code version of Minified.
</p>

<h2>How can I Compile Minified.js with UglifyJS / YUI Compressor / Closure Simple Optimization?</h2>
<p>You can use both the compiled or the plain source versions of Minified to embed and compile. However, to get the smallest
possible code size I recommend using the compiled version, as the other tools can't reduce the size as much as Closure's Advanced Optimization
can. Compiling twice does not hurt as long as you don't use Closure Advanced Optimization twice. In fact, the offical Minifed releases are 
also compiled twice.
</p>

<h2>How are Minified's Releases Compiled??</h2>
<p>The compiled versions of Minified.js are first compiled with the Google Closure Compiler with Advanced Optimization, and the result
is then compiled again using UglifyJS. In the first step, the size is reduced from over 100kb to about 9kb. In the second step, UglifyJS removes
about 80 bytes. After GZip'ing the difference is only about 30 bytes.<br/>
If you are using the <a href="/builder/">builder tool</a>, only Google Closure is used. That's why the builder creates slightly larger files than 
the release versions.

</p>

  </div>
 ]]></page:main>

  
</page:page>