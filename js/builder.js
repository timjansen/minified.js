if(/^u/.test(typeof define)){var def={};this.define=function(m,e){def[m]=e()};this.require=function(m){return def[m]}}
define("minifiedUtil",function(){function m(c){return c.substr(0,3)}function e(c){return null!=c?""+c:""}function j(c){return"string"==typeof c}function g(c){return"function"==typeof c}function k(c){return!!c&&"object"==typeof c}function r(c){return"number"==typeof c}function n(c){return k(c)&&!!c.getDay}function q(c){return!0===c||!1===c}function l(c){var a=typeof c;return"object"==a?!(!c||!c.getDay):"string"==a||"number"==a||q(c)}function t(c){return!!c&&null!=c.length&&!j(c)&&!(c&&c.nodeType)&&
!g(c)}function p(c){return c}function u(c){return c+1}function s(c,a,b){return e(c).replace(a,null!=b?b:"")}function P(c){return s(c,/[\\\[\]\/{}()*+?.$|^-]/g,"\\$&")}function M(c){return s(c,/^\s+|\s+$/g)}function A(c,a){for(var b in c)c.hasOwnProperty(b)&&a(b,c[b]);return c}function B(c,a){if(c)for(var b=0;b<c.length;b++)a(c[b],b);return c}function E(c,a){var b=[];B(c,function(c,d){a(c,d)&&b.push(c)});return b}function Q(c,a,b){var d=[];c(a,function(c,a){t(c=b(c,a))?B(c,function(c){d.push(c)}):
null!=c&&d.push(c)});return d}function x(c,a){return Q(B,c,a)}function C(c){var a=[];A(c,function(c){a.push(c)});return a}function v(c,a){var b=[];B(c,function(c,d){b.push(a(c,d))});return b}function w(c,a,b){var d=a;B(c,function(c,a){d=b(d,c,a)});return d}function y(c,a){if(t(c)){var b=J(a);return d(J(c).sub(0,b.length),b)}return null!=a&&c.substr(0,a.length)==a}function F(c,a){if(t(c)){var b=J(a);return J(c).sub(-b.length).equals(b)||!b.length}return null!=a&&c.substr(c.length-a.length)==a}function G(c){var a=
c.length;return v(c,function(){return c[--a]})}function U(c,a,b){if(!t(c))return[];var d=c.length,f=0>a?d+a:a,h=null==b?d:0<=b?b:d+b;return E(c,function(c,a){return a>=f&&a<h})}function D(c,a){var b={};B(c,function(c){b[c]=a});return b}function R(c,a,b){A(c,function(c,d){if(null==a[c]||!b)a[c]=d});return a}function a(c,a){for(var b=g(a)?a:function(c,b){if(a===c)return b},d,f=0;f<c.length;f++)if(null!=(d=b(c[f],f)))return d}function b(c,a){if(t(c))for(var b=0;b<c.length;b++)if(c[b]==a)return!0;return!1}
function d(c,b){var f=g(c)?c():c,h=g(b)?b():b;if(f==h)return!0;if(null==f||null==h)return!1;if(l(f)||l(h))return n(f)&&n(h)&&f.getTime()==h.getTime();if(t(f))return f.length!=h.length?!1:!a(f,function(c,a){if(!d(c,h[a]))return!0});if(t(h))return!1;var e=C(f),q=e.length,k=0;A(h,function(){k++});return q!=k?!1:!a(e,function(c){if(!d(f[c],h[c]))return!0})}function f(c,a,b){return c.apply(b&&a,v(b||a,p))}function h(c,a,b){return v(c,function(c){return g(c)?f(c,a,b):S})}function K(c,a,b,d){return function(){return f(c,
a,x([b,arguments,d],p))}}function L(c,a){return z(a,0,0,0,c)}function z(c,a,b,d,f,h,e){function l(c){var a=c.length;return a>e?l(c.substr(0,a-e))+(h||",")+c.substr(a-e):c}var k=0>c,q=/(\d+)(\.(.*))?/.exec((k?-c:c).toFixed(a));c=q[1];for(d=(d||".")+q[3];c.length<(f||1);)c="0"+c;e&&(c=l(c));return(k?"-":"")+c+(a?b?s(d,/[.,]?0+$/):d:"")}function Y(c,a,b){return null==a||!c?0:60*parseInt(c[a])+parseInt(c[a+1])+b.getTimezoneOffset()}function ba(c,b){c=s(c,/^\?/);if(n(b)){var d,f,h=c,l=b,k={y:["FullYear",
p],M:["Month",u],n:["Month",ca],N:["Month",Z],d:["Date",p],m:["Minutes",p],H:["Hours",p],h:["Hours",function(c){return c%12||12}],K:["Hours",u],k:["Hours",function(c){return c%12+1}],s:["Seconds",p],S:["Milliseconds",p],a:["Hours",function(c,a){return(a||da)[12>c?0:1]}],w:["Day",ka],W:["Day",ea],z:["TimezoneOffset",function(c){if(d)return d;var a=0<c?c:-c;return(0>c?"+":"-")+L(2,Math.floor(a/60))+L(2,a%60)}]};if(f=/^\[(([+-]\d\d)(\d\d))\]\s*(.*)/.exec(c))d=f[1],l=V(b,"minutes",Y(f,2,b)),h=f[4];return s(h,
/(\w)(\1*)(?:\[([^\]]+)\])?/g,function(c,a,b,d){if(a=k[a])c=l["get"+(t(a)?a[0]:a)].call(l),d=d&&d.split(","),c=t(a[1])?(d||a[1])[c]:a[1](c,d),null!=c&&!j(c)&&(c=L(b.length+1,c));return c})}return a(c.split(/\s*\|\s*/),function(c){var a,d;if(a=/^([<>]?)(=?)([^:]*?)\s*:\s*(.*)$/.exec(c)){c=b;var f=parseFloat(a[3]);if(isNaN(f)||!r(c))c=null==c?"null":e(c),f=a[3];if(a[1]){if(!a[2]&&c==f||"<"==a[1]&&c>f||">"==a[1]&&c<f)return null}else if(c!=f)return null;c=a[4]}if(r(b)&&(a=/(?:(0[0.,]*)|(#[#.,]*))(_*)(9*)/.exec(c))){d=
e(a[1])+e(a[2]);var f=e(a[1]).length?s(d,/[.,]/g).length:1,h=s(s(d,/^.*[0#]/),/[^,.]/g),l=e(a[3]).length+e(a[4]).length,k,q;if(d=/([.,])[^.,]+[.,]/.exec(a[0]))k=d[1],q=d[0].length-2;k=z(b,l,e(a[3]).length,h,f,k,q);q=c;c=a.index;a=e(a[0]).length;return q.substr(0,c)+k+q.substr(c+a)}return c})}function fa(c,a){if(1==arguments.length)return fa(null,c);if(/^\?/.test(c)){if(""==M(a))return null;c=c.substr(1)}var b,d=(b=/[0#]([.,])[_9]/.exec(c))?b[1]:(b=/^[.,]$/.exec(c))?b[0]:".";b=parseFloat(s(s(s(a,","==
d?/\./g:/,/g),d,"."),/^[^\d-]*(-?\d)/,"$1"));return isNaN(b)?S:b}function W(c){return new Date(c.getTime())}function T(c,a,b){c["set"+a].call(c,c["get"+a].call(c)+b);return c}function V(c,a,b){return 3>arguments.length?V(new Date,c,a):T(W(c),a.charAt(0).toUpperCase()+a.substr(1),b)}function ga(c,a,b){var d=a.getTime(),f=b.getTime(),h=f-d;if(0>h)return-ga(c,b,a);if(a={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5}[c])return h/a;a=c.charAt(0).toUpperCase()+c.substr(1);c=Math.floor(h/{fullYear:31536E6,
month:2628E6,date:864E5}[c]-2);d=T(new Date(d),a,c);for(h=c;h<1.2*c+4;h++)if(T(d,a,1).getTime()>f)return h}function aa(a,b,d){var f=/^(([^.]|\.\.)+)\.([^.].*)/.exec(b);if(f){b=s(f[1],/\.\./g,".");var h=a[b];return aa(g(h)?h():h,f[3],d)}b=s(b,/\.\./g,".");h=a[b];return d===S?g(h)?h():h:g(h)?h(d):a[b]=d}function ha(a){return s(a,/['"\t\n\r]/g,function(a){return la[a]})}function ia(a,b){if(X[a])return X[a];var d=function(a,c){t(a)?B(a,function(a,b){c.call(value,value,b)}):A(a,function(a,b){c.call(b,
b,a,a)})},h=new Function("obj","each","esc","print","_","with(obj){"+v(a.split(/{{|}}}?/),function(a,c){var b,d,f=a==(d=s(a,/^{/))?"esc(":"";return c%2?(b=/(.*)::(.*)/.exec(d))?"print("+f+'_.formatValue("'+ha(b[2])+'",'+b[1]+(f&&")")+"));\n":"print("+f+d+(f&&")")+");\n":'print("'+ha(a)+'");\n'}).join("")+"}");return X[a]=function(a){var c=[];h(a,d,b||p,function(){f(c.push,c,arguments)},J);return c.join("")}}function ja(a){return s(a,/[<>'"&]/g,function(a){return"&#"+a.charCodeAt(0)+";"})}function N(a,
b){for(var d=0,f=0;f<a.length;f++){var h=a[f];if(b&&t(h))for(var k=0;k<h.length;k++)this[d++]=h[k];else this[d++]=h}this.length=d;this._=!0}function J(){return new N(arguments,!0)}function O(a){return function(b,d){return new N(a(this,b,d))}}function H(a){return function(b,d){return a(this,b,d)}}function I(a){return function(b,d,f){return new N(a(b,d,f))}}var S,Z="January,February,March,April,May,June,July,August,September,October,November,December".split(/,/),ca=v(Z,m),ea="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(/,/),
ka=v(ea,m),da=["am","pm"],la={'"':'\\"',"'":"\\'","\n":"\\n","\t":"\\t","\r":"\\r"},X={},X={};R({each:H(B),filter:O(E),collect:O(x),map:O(v),reduce:H(w),toObject:H(D),equals:H(d),sub:O(U),reverse:O(G),find:H(a),startsWith:H(y),endsWith:H(F),contains:H(b),call:O(h),array:function(){return v(this,p)},func:function(){var a=this;return function(){return new N(h(a,arguments))}},join:function(a){return v(this,p).join(a)},sort:function(a){return new N(v(this,p).sort(a))},uniq:function(){var a={};return this.filter(function(b){if(a[b])return!1;
a[b]=1;return!0})},intersection:function(a){var b=D(a,1);return this.filter(function(a){var c=b[a];b[a]=0;return c})},tap:function(a){a(this);return this},toString:function(){return"["+this.map(function(a){return j(a)?"'"+s(a,/'/g,"\\'")+"'":a}).join(", ")+"]"}},N.prototype);R({bind:K,partial:function(a,b,d){return K(a,null,b,d)},once:function(a){var b=0;return function(){if(!b++)return f(a,this,arguments)}},nonOp:p,each:B,eachObj:A,toObject:D,filter:I(E),filterObj:function(a,b){var d={};A(a,function(a,
c){b(a,c)&&(d[a]=c)});return d},collect:I(x),collectObj:I(function(a,b){return Q(A,a,b)}),map:I(v),mapObj:function(a,b){var d={};A(a,function(a,c){d[a]=b(a,c)});return d},reduce:w,find:a,contains:b,sub:I(U),reverse:I(G),startsWith:y,endsWith:F,equals:d,toString:e,isList:t,isFunction:g,isObject:k,isNumber:r,isBool:q,isDate:n,isValue:l,isString:j,toString:e,prop:aa,escapeRegExp:P,trim:M,dateClone:W,dateAdd:V,dateDiff:ga,dateMidnight:function(a){a=a||new Date;return new Date(a.getFullYear(),a.getMonth(),
a.getDate())},formatNumber:z,pad:L,formatValue:ba,parseDate:function(b,d){var f={y:0,M:[1,1],n:[1,ca],N:[1,Z],d:2,m:4,H:3,h:3,K:[3,1],k:[3,1],s:5,S:6,a:[3,da]},h={},k=1,l,q,e;if(/^\?/.test(b)){if(""==M(d))return null;b=b.substr(1)}if(e=/^\[([+-]\d\d)(\d\d)\]\s*(.*)/.exec(b))l=e,b=e[3];if(!(e=RegExp(b.replace(/(.)(\1*)(?:\[([^\]]*)\])?/g,function(a,b,c,d){return/[dmhkyhs]/i.test(b)?(h[k++]=b,a=c.length+1,"(\\d"+(2>a?"+":"{1,"+a+"}")+")"):"z"==b?(q=k,k+=2,"([+-]\\d\\d)(\\d\\d)"):/[Nna]/.test(b)?(h[k++]=
[b,d&&d.split(",")],"([a-zA-Z\u0080\ufffd\u1fff]+)"):/w/i.test(b)?"[a-zA-Z\u0080\ufffd\u1fff]+":/\s/.test(b)?"\\s+":P(a)})).exec(d)))return S;for(var g=[0,0,0,0,0,0,0],K=1;K<k;K++){var m=e[K],j=h[K];if(t(j)){var p=j[0],z=f[p],n=z[0],j=a(j[1]||z[1],function(a,b){return y(m.toLowerCase(),a.toLowerCase())?b:null});if(null==j)return S;g[n]="a"==p?g[n]+12*j:j}else j&&(p=parseInt(m),z=f[j],t(z)?g[z[0]]+=p-z[1]:g[z]+=p)}f=new Date(g[0],g[1],g[2],g[3],g[4],g[5],g[6]);return V(f,"minutes",-Y(l,1,f)-Y(e,q,
f))},parseNumber:fa,keys:I(C),values:I(function(a){var b=[];A(a,function(a,c){b.push(c)});return b}),copyObj:R,coal:function(){return a(arguments,p)},format:function(a,b){return s(a,/{([^,}]*)(,([^}]*))?}/g,function(a,c,d,f){a=""==c?b:aa(b,c);return d?ba(f,a):e(a)})},escapeHtml:ja,template:ia,htmlTemlplate:function(a){return ia(a,ja)}},J);return{_:J}});/^u/.test(typeof define)&&(def={},this.define=function(m,e){def[m]=e()},this.require=function(m){return def[m]});
define("minified",function(){function m(a){return null!=a?""+a:""}function e(a){return"string"==typeof a}function j(a){return"function"==typeof a&&!a.item}function g(a){return a&&a.nodeType}function k(a){return a&&null!=a.length&&!e(a)&&!g(a)&&!j(a)}function r(a,b){for(var d in a)a.hasOwnProperty(d)&&b(d,a[d]);return a}function n(a,b){for(var d=0;a&&d<a.length;d++)b(a[d],d);return a}function q(a,b){var d=[];n(a,function(a,h){b(a,h)&&d.push(a)});return d}function l(a,b){var d=[];n(a,function(a,h){k(a=
b(a,h))?n(a,function(a){d.push(a)}):null!=a&&d.push(a)});return d}function t(a,b){var d=[];r(a,function(a,h){k(a=b(a,h))?n(a,function(a){d.push(a)}):null!=a&&d.push(a)});return d}function p(a,b,d){return m(a).replace(b,d||"")}function u(a){return parseFloat(p(a,/^[^\d-]+/))}function s(a){var b={$position:"absolute",$visibility:"hidden",$display:"block",$height:null},d=a.get(b);a.set(b);b=a.get("$height",!0);a.set(d);return b}function P(a){a()}function M(){n(F,P);F=null}function A(a){F?F.push(a):w.setTimeout(a,
0)}function B(a,b,d,f){return function(){var h=x(y.createElement(a));k(b)||"object"!=typeof b?h.add(b):h.set(b).add(d);f&&f(h);return h}}function E(){var a,b=[],d=[],f=function(f,h){null==a&&(a=f,b=h,w.setTimeout(function(){n(d,P)},0))},h=f.then=function(f,h){var k=E(),e=function(){try{var d=a?f:h;if(j(d)){var e=d.apply(null,b);e&&j(e.then)?e.then(function(a){k(!0,[a])},function(a){k(!1,[a])}):k(!0,[e])}else k(a,b)}catch(l){k(!1,[l])}};null!=a?w.setTimeout(e,0):d.push(e);return k};f.always=function(a){return h(a,
a)};f.error=function(a){return h(0,a)};return f}function Q(a){return R[a]||"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}function x(a,b,d){return j(a)?A(a):new v(C(a,b,d))}function C(a,b,d){function f(a){a=function W(a){return k(a)?l(a,W):a}(a);return h?q(a,function(a){for(;a=a.parentNode;){if(a===h)return!0;if(d)return!1}}):a}var h,g,j,m,n;if(b&&1!=(b=C(b)).length)return l(b,function(b){return C(a,b,d)});h=b&&b[0];if(!e(a))return f(k(a)?a:[a]);if(1<(b=a.split(/\s*,\s*/)).length)return l(b,
function(a){return C(a,h,d)});if(b=/(\S+)\s+(.+)$/.exec(a))return C(b[2],C(b[1],h),d);if(a!=(b=p(a,/^#/)))return f([y.getElementById(b)]);h=h||y;g=(b=/([^.]*)\.?([^.]*)/.exec(a))[1];m=b[2];b=(j=h.getElementsByClassName&&m)?h.getElementsByClassName(m):h.getElementsByTagName(g||"*");if(g=j?g:m)n=RegExp("\\b"+g+"\\b","i"),b=q(b,function(a){return n.test(a[j?"nodeName":"className"])});return h?f(b):b}function v(a){for(var b=this.length=a.length,d=0;d<b;d++)this[d]=a[d]}var w=this,y=document,F=[],G=[],
U=w.requestAnimationFrame||function(a){w.setTimeout(a,33)},D=!!y.all&&!F.map,R={"\t":"\\t","\r":"\\r","\n":"\\n",'"':'\\"',"\\":"\\\\"};r({each:function(a){return n(this,a)},filter:function(a){return new v(q(this,a))},collect:function(a){return new v(l(this,a))},sub:function(a,b){var d=0>a?this.length+a:a,f=0<=b?b:this.length+(b||0);return new v(q(this,function(a,b){return b>=d&&b<f}))},find:function(a){for(var b,d=j(a)?a:function(b,d){if(a===b)return d},f=0;f<this.length;f++)if(null!=(b=d(this[f],
f)))return b},hasClass:function(a){var b=RegExp("\\b"+a+"\\b");return this.find(function(a){return b.test(a.className)?a:null})},remove:function(){n(this,function(a){a.parentNode.removeChild(a)})},text:function(){function a(b){var d=g(b);return 1==d?l(b.childNodes,a):5>d?b.data:null}return l(this,a).join("")},get:function(a,b){var d=this,f=d[0];if(f){if(e(a)){var h=p(a,/^[$@]/),g;g="$"==a?f.className:"$$"==a?D?f.style.cssText:f.getAttribute("style"):/\$\$/.test(a)&&("hidden"==f.style.visibility||
"none"==f.style.display)?0:"$$fade"==a?isNaN(g=D?u(f.style.filter)/100:u(f.style.opacity))?1:g:"$$slide"==a?d.get("$height"):/^\$/.test(a)?w.getComputedStyle?w.getComputedStyle(f,null).getPropertyValue(p(h,/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):(f.currentStyle||f.style)[h]:/^@/.test(a)?f.getAttribute(h):f[h];return b?u(g):g}var l={};(k(a)?n:r)(a,function(a){l[a]=d.get(a,b)});return l}},set:function(a,b){var d=this,f;void 0!==b?"$$fade"==a||"$$slide"==a?d.set({$visibility:0<(f=u(b))?"visible":
"hidden",$display:"block"}).set("$$fade"==a?D?{$filter:"alpha(opacity = "+100*f+")",$zoom:1}:{$opacity:f}:{$height:/px$/.test(b)?b:function(a,b,d){return f*(f&&s(x(d)))+"px"},$overflow:"hidden"}):n(d,function(d,f){var k=p(a,/^[@$]/),g=d.className||"",e=/^\$/.test(a)?d.style:d,l=j(b)?b(x(d).get(a),f,d):b;"$"==a?null!=l&&(n(l.split(/\s+/),function(a){var b=p(a,/^[+-]/),d=g;g=p(g,RegExp("\\b"+b+"\\b"));if(/^\+/.test(a)||b==a&&d==g)g+=" "+b}),d.className=p(g,/^\s+|\s+(?=\s|$)/g)):"$$"==a?D?e.cssText=
l:null!=l?d.setAttribute("style",l):d.removeAttribute("style"):/^@/.test(a)?null!=l?e.setAttribute(k,l):e.removeAttribute(k):e[k]=l}):e(a)||j(a)?d.set("$",a):r(a,function(a,b){d.set(a,b)});return d},add:function(a,b){return n(this,function(d,f){var h;(function L(a){k(a)?n(a,L):j(a)?L(a(d,f)):null!=a&&(a=g(a)?a:y.createTextNode(a),h?h.parentNode.insertBefore(a,h.nextSibling):b?b(a,d,d.parentNode):d.appendChild(a),h=a)})(g(a)&&f?null:a)})},fill:function(a){return n(this,function(a){x(a.childNodes).remove()}).add(a)},
addBefore:function(a){return this.add(a,function(a,d,f){f.insertBefore(a,d)})},addAfter:function(a){return this.add(a,function(a,d,f){f.insertBefore(a,d.nextSibling)})},addFront:function(a){return this.add(a,function(a,d){d.insertBefore(a,d.firstChild)})},replace:function(a){return this.add(a,function(a,d,f){f.replaceChild(a,d)})},clone:function(a){return new v(l(this,function(b){var d=g(b);if(1==d){var f={$:b.className||null,$$:D?b.style.cssText:b.getAttribute("style")};n(b.attributes,function(a){var d=
a.name;"id"!=d&&("style"!=d&&"class"!=d&&b.getAttribute(d))&&(f["@"+d]=a.value)});return B(b.tagName,f,x(b.childNodes).clone(),a)}return 5>d?b.data:null}))},animate:function(a,b,d,f){var h=this,g=[],k=/-?[\d.]+/,e,l=E(),q=j(d)?d:function(a,b,f){return a+f*(b-a)*(d+(1-d)*f*(3-2*f))};f=f||{};f.time=0;f.stop=function(){e();l(!1)};b=b||500;d=d||0;n(h,function(b){var d={o:x(b),e:{}};r(d.s=d.o.get(a),function(b,f){var h=a[b];"$$slide"==b&&(h=h*s(d.o)+"px");d.e[b]=/^[+-]=/.test(h)?p(h.substr(2),k,u(f)+u(p(h,
/\+?=/))):h});g.push(d)});e=x.loop(function(a){function d(a,b){return/^#/.test(a)?parseInt(6<a.length?a.substr(1+2*b,2):(a=a.charAt(1+b))+a,16):parseInt(p(a,/[^\d,]+/g).split(",")[b])}f.time=a;a>=b||0>a?(n(g,function(a){a.o.set(a.e)}),e(),f.time=null,l(!0,[h])):n(g,function(f){r(f.s,function(h,g){var e="rgb(",l=f.e[h],j=a/b;if(/^#|rgb\(/.test(l))for(var n=0;3>n;n++)e+=Math.round(q(d(g,n),d(l,n),j))+(2>n?",":")");else e=p(l,k,m(q(u(g),u(l),j)));f.o.set(h,e)})})});return l},toggle:function(a,b,d,f){var h=
this,g={},e=!1,l=/\b(?=\w)/g;return!b?h.toggle(p(a,l,"-"),p(a,l,"+")):h.set(a)&&function(l){l!==e&&(e=!0===l||!1===l?l:!e,d?h.animate(e?b:a,g.stop?g.stop()||g.time:d,f,g):h.set(e?b:a))}},on:function(a,b,d,f){return n(this,function(h,g){n(a.split(/\s/),function(a){var l=p(a,/\|/),e=function(h){h=h||w.event;if((!b.apply(f?d:h.target,f||d||[h,g])||f)&&a==l)h.stopPropagation&&(h.preventDefault(),h.stopPropagation()),h.returnValue=!1,h.cancelBubble=!0};(b.M=b.M||[]).push({e:h,h:e,n:l});h.addEventListener?
h.addEventListener(l,e,!0):h.attachEvent("on"+l,e)})})}},function(a,b){v.prototype[a]=b});r({request:function(a,b,d,f,h,q){var j,n=d,p=0,u=E();try{j=w.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Msxml2.XMLHTTP.3.0"),null!=d&&(f=f||{},!e(d)&&!g(d)&&(n=t(d,function T(a,b){return k(b)?l(b,function(b){return T(a,b)}):encodeURIComponent(a)+(null!=b?"="+encodeURIComponent(b):"")}).join("&")),/post/i.test(a)?!g(d)&&(!e(d)&&!f["Content-Type"])&&(f["Content-Type"]="application/x-www-form-urlencoded"):
(b+="?"+n,n=null)),j.open(a,b,!0,h,q),r(f,function(a,b){j.setRequestHeader(a,b)}),j.onreadystatechange=function(){4==j.readyState&&!p++&&(200==j.status?u(!0,[j.responseText,j.responseXML]):u(!1,[j.status,j.statusText,j.responseText]))},j.send(n)}catch(s){p||u(!1,[0,null,m(s)])}return u},toJSON:function b(d){return null==d?""+d:e(d=d.valueOf())?'"'+p(d,/[\\\"\x00-\x1f\x22\x5c]/g,Q)+'"':k(d)?"["+l(d,b).join()+"]":"object"==typeof d?"{"+t(d,function(d,h){return b(d)+":"+b(h)}).join()+"}":m(d)},parseJSON:w.JSON?
w.JSON.parse:function(b){b=p(b,/[\x00\xad\u0600-\uffff]/g,Q);if(/^[[\],:{}\s]*$/.test(p(p(b,/\\["\\\/bfnrtu]/g),/"[^"\\\n\r]*"|true|false|null|[\d.eE+-]+/g)))return eval("("+b+")")},ready:A,setCookie:function(b,d,f,h,l,e){y.cookie=b+"="+(e?d:escape(d))+(f?"; expires="+("object"==typeof f?f:new Date((new Date).getTime()+864E5*f)).toUTCString():"")+"; path="+(h?escapeURI(h):"/")+(l?"; domain="+escape(l):"")},getCookie:function(b,d){var f,h=(f=RegExp("(^|;)\\s*"+b+"=([^;]*)").exec(y.cookie))&&f[2];return d?
h:h&&unescape(h)},loop:function(b){var d={c:b,t:(new Date).getTime(),s:function(){for(var b=0;b<G.length;b++)G[b]===d&&G.splice(b--,1)}};2>G.push(d)&&function h(){n(G,function(b){b.c(Math.max(0,(new Date).getTime()-b.t),b.s)}).length&&U(h)}();return d.s},wait:function(b){var d=E();w.setTimeout(function(){d(!0,[b])},b||0);return d},off:function(b){n(b.M,function(b){b.e.removeEventListener?b.e.removeEventListener(b.n,b.h,!0):b.e.detachEvent("on"+b.n,b.h)});b.M=null}},function(b,d){x[b]=d});w.onload=
M;y.addEventListener&&y.addEventListener("DOMContentLoaded",M,!1);return{$:x,$$:function(b){return C(b)[0]},EE:B}});var _=require("minifiedUtil")._;
function parseSourceSections(m){function e(){return{id:"anon"+j++,src:[],desc:"",requires:{},requiredBy:{},syntax:[],example:[],params:[]}}m=m.split("\n");var j=100,g=[],k=e(),r=!1;_.each(m,function(j){if(r&&/^.*\*\/\s*$/.test(j))r=!1;else if(r){var q=j.replace(/^\s*(\*\s?)?/,"").replace(/\s*$/,""),l=q.match(/^\s*@([a-z]+)/);l?(l=l[1],q=_.trim(q.replace(/^\s*@[a-z]+\s*/,"")),"syntax"==l||"example"==l?k[l].push(q):"requires"==l?q.length&&_.each(q.split(/\s+/),function(l){k.requires[l]=1}):"param"==
l?k.params.push({name:q.replace(/\s.*$/,""),desc:q.replace(/^\S+\s+/,"")}):"return"==l?k.params.push({name:"@return",desc:q}):"function"==l?k.params[k.params.length-1].funcs.push(q):k[l]=""!=q?q:1):k.params.length?k.params[k.params.length-1].desc+="\n"+_.trim(q):k.example.length?k.example[k.example.length-1]+="\n"+q:k.desc+=q+"\n"}else/^\s*\/\*\$/.test(j)&&!/\*\/\s*$/.test(j)&&(r=!0,g.push(k),k=e());k.src.push(j)});g.push(k);return g}
function createSectionMap(m){var e={};_.each(m,function(j){e[j.id]=j});return e}function completeRequirements(m,e){var j=0;_.each(m,function(g){_.eachObj(g.requires,function(k){var m=e[k];if(!m)throw Error('Unknown id in requirement: "'+k+'"');_.eachObj(m.requires,function(e){g.requires[e]||(j++,g.requires[e]=1)})})});0<j?completeRequirements(m,e):_.each(m,function(g){_.eachObj(g.requires,function(k){e[k].requiredBy[g.id]=1})})}
function calculateDependencies(m,e){var j={};_.eachObj(e,function(g){e[g]&&(j[g]=1,_.eachObj(m[g].requires,function(e){j[e]=1}))});return j}function createDefaultConfigurationMap(m,e){var j={};_.each(m,function(g){if(g.configurable&&("default"==g.configurable||e))j[g.id]=1});return j}
function compile(m,e,j){var g="",k=calculateDependencies(e,j),r=[],n=!0;_.filter(m,function(e){return k[e.id]||!(e.configurable||e.dependency)}).each(function(e){_.each(e.src,function(e){if(/^\s*$/.test(e))n||(g+="\n"),n=!0;else{var j=e.match(/^(\s*)\/\/\s*@(cond|condblock)\s+(\!?)(\w*)\s*(.*)$/);if(j&&"cond"==j[2]&&!!k[j[4]]!=("!"==j[3]))g+=j[1]+j[5]+"\n";else if(j&&"condblock"==j[2])r.unshift(!!k[j[4]]!=("!"==j[3]));else if(r.length&&/^\s*\/\/\s*@condend(\s|$)/.test(e))r.shift();else if(0==r.length||
r[0])g+=e+"\n";n=!1}})});return g}function prepareSections(m){m=parseSourceSections(m);var e=createSectionMap(m);completeRequirements(m,e);var j=createDefaultConfigurationMap(m);return{sections:m,sectionMap:e,enabledSections:j}}var CONFIG_START="minified.js config start --",CONFIG_COMMENT="// - ",CONFIG_ALL="All sections.",CONFIG_ALL_EXCEPT="All sections except ",CONFIG_ONLY="Only sections ";
function serializeEnabledSections(m,e){var j=_.filter(m,function(e){return e.configurable}),g=_.filter(_.keys(e),function(l){return e[l]}),k,r=[];g.length==j.length?(k=CONFIG_COMMENT+CONFIG_ALL,r=[]):g.length/3>j.length/2?(k=CONFIG_COMMENT+CONFIG_ALL_EXCEPT,r=_.filter(j,function(l){return!e[l.id]}).collect(function(e){return e.id})):(k=CONFIG_COMMENT+CONFIG_ONLY,r=g);var n="// "+CONFIG_START+" use this comment to re-create configuration in the Builder\n"+k,q=50;_(r).sort().each(function(e){q<e.length?
(q=70,n+="\n// - "+e+", "):(n+=e+", ",q-=e.length+2)});return n=n.replace(/,\s*$/,".\n")}function fixConfig(m,e){_.eachObj(e,function(j){m[j]?_.copyObj(m[j].requires,e):delete e[j]});return e}
function deserializeEnabledSections(m,e,j){function g(e){return RegExp("^"+e.replace(/ /g,"\\s+"))}var k=g(CONFIG_START+".*"),r=g(CONFIG_ALL.replace(/\./,"\\.")),n=g(CONFIG_ALL_EXCEPT+"\\s*"),q=g(CONFIG_ONLY+"\\s*"),l=g(CONFIG_COMMENT);j=j.split("\n");for(var t=0;t<j.length;t++){var p=j[t];if(/^\s*\/\/s*/.test(p)&&(p=p.replace(/^\s*\/\/\s*/,""),k.test(p)&&t+1<j.length)){for(var p="",u=t+1;u<j.length;u++)if(l.test(j[u])){if(p+=j[u].replace(l,""),/\s*\.\s*$/.test(j[u]))break}else break;if(r.test(p))return createDefaultConfigurationMap(m,
!0);p=p.replace(/\s*\.\s*$/,"");if(n.test(p)){var s=createDefaultConfigurationMap(m,!0);_.each(p.replace(n,"").split(/\s*,\s*/),function(e){delete s[e]});return fixConfig(e,s)}if(q.test(p))return s={},_.each(p.replace(q,"").split(/\s*,\s*/),function(g){e[g]&&(s[g]=1)}),fixConfig(e,s)}}return null};var MINI=require("minified"),$=MINI.$,$$=MINI.$$,EE=MINI.EE,_=require("minifiedUtil")._,MAX_SIZE=4095,SRC="/minified-web-src.js",GROUPS="INTERNAL SELECTORS ELEMENT REQUEST JSON EVENTS COOKIE ANIMATION OPTIONS".split(" ");
function closureCompile(m,e,j){$.request("post","http://closure-compiler.appspot.com/compile",{js_code:m,output_format:"json",output_info:["compiled_code","statistics"],output_file_name:"minified-custom.js",compilation_level:e?"ADVANCED_OPTIMIZATIONS":"SIMPLE_OPTIMIZATIONS"}).then(function(e){j&&j($.parseJSON(e))},function(e,k,m){window.console&&console.log("error",e,k,m);j&&j(null)}).error(function(e){window.console&&console.log(e)})}
function setUpConfigurationUI(m){function e(){$(".modCheck").each(function(e){var g=0;$(".secCheck",e.parentNode.parentNode).each(function(e){e.checked&&g++});e.checked=0<g})}function j(e){var g=m.sectionMap[e.id.substr(4)];e.checked?_.eachObj(g.requires,function(e){$("#sec-"+e).set("checked",!0)}):_.eachObj(g.requiredBy,function(e){$("#sec-"+e).set("checked",!1)})}$("#compile").on("click",function(){var e={};$(".secCheck").each(function(g){g.checked&&(e[g.id.substr(4)]=1)});var g=compile(m.sections,
m.sectionMap,e),j=serializeEnabledSections(m.sections,e);if($$("#compressionAdvanced").checked)$$("#compile").disabled=!0,closureCompile(g,!0,function(e){$$("#compile").disabled=!1;$("#resultDiv").animate({$$slide:1});e?($("#gzipRow, #downloadRow").set({$display:"table-row"}),$$("#resultSrc").value=j+"\n"+e.compiledCode,$("#resultPlain").fill((e.statistics.compressedSize/1024).toFixed(2)+"kb ("+e.statistics.compressedSize+" bytes)"),$("#resultGzippedSize").fill((e.statistics.compressedGzipSize/1024).toFixed(2)+
"kb ("+e.statistics.compressedGzipSize+" bytes)"),$$("#resultLink").setAttribute("href","http://closure-compiler.appspot.com"+e.outputFilePath),$("#resultGzippedComment").set({$$fade:e.statistics.compressedGzipSize>MAX_SIZE?1:0})):alert("Google Closure Service not availble. Try again later.")});else try{$("#resultDiv").animate({$$slide:1}),$$("#resultSrc").value=j+g,$("#resultPlain").fill((g.length/1024).toFixed(2)+"kb"),$("#gzipRow, #downloadRow").set({$display:"none"})}catch(k){console.log(k)}return!1});
var g=$("#configSrcDiv").toggle({$$slide:0},{$$slide:1});$("#fromScratch").on("|click",g,[!1]);$("#loadConfig").on("|click",g,[!0]);$("#recreate").on("click",function(){try{var g=$$("#configSrc").value,j=deserializeEnabledSections(m.sections,m.sectionMap,g);j?(_.eachObj(m.sectionMap,function(e){var g=$$("#sec-"+e);g&&(g.checked=!!j[e])}),e()):alert("Can not find configuration in source.")}catch(k){console.log(k)}});$("#sectionCheckboxes").fill();for(var k=1;k<GROUPS.length;k++){var r;$("#sectionCheckboxes").add(r=
EE("div",{"@id":"divMod-"+k},EE("div",{className:"groupDescriptor"},[g=EE("input",{"@id":"mod-"+k,className:"modCheck","@type":"checkbox",checked:"checked"})(),EE("label",{"@for":"mod-"+k},GROUPS[k])]))());$(g).on("change",function(){var g=this.checked;$(".secCheck",this.parentNode.parentNode).each(function(e){e.checked=g;j(e)});e();return!0});var n;_.filter(m.sections,function(e){return e.group==GROUPS[k]&&e.configurable}).sort(function(e,g){var j=e.name||e.id,k=g.name||g.id;return j==k?0:j>k?1:
-1}).each(function(g){function k(e,g){var j=_.filter(_.keys(g),function(e){return!!g[e].name});if(!j.length)return null;var l=0,n=e;_.each(j,function(e){l++<Math.min(j.length,8)&&(1<l&&(n=l==Math.min(j.length,8)?n+" and ":n+", "),n=8==l&&8<j.length?n+"more":n+(m.sectionMap[e].name||m.sectionMap[e].id))});return n+="."}var t=k("Required by ",g.requiredBy),p=k("Requires ",g.requires);r.add(EE("div",{className:"sectionDescriptor"},[n=EE("input",{className:"secCheck","@type":"checkbox","@id":"sec-"+g.id,
checked:"default"==g.configurable?"checked":null})(),EE("label",{"@for":"sec-"+g.id},g.name||g.id),EE("div",{className:"requirements"},[t?[t,EE("br")]:null,p])]));$(n).on("change",function(){j(this);e();return!0})})}}
$(function(){var m=/MSIE\s([\d.]+)/i.exec(navigator.userAgent);m&&10>parseInt(m[1])?$("#builderDiv").fill("Sorry, the Builder tool requires at least Internet Explorer 10 (or, alternatively, Chrome or Firefox). Earlier versions lack CORS support required to use Google Closure's web service."):$.request("get",SRC,null).then(function(e){setUpConfigurationUI(prepareSections(e))}).error(function(e){window.console&&console.log(e)})});
